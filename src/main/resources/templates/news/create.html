<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Create News</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
    <script>
        let fileInputCount = 1;

        function addFileInput() {
            const fileInputsContainer = document.getElementById('fileInputs');
            const fileInputDiv = document.createElement('div');
            fileInputDiv.className = 'file-input-wrapper';
            fileInputDiv.id = 'file-input-' + fileInputCount;

            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.name = 'imageFiles';
            fileInput.multiple = true;

            const removeButton = document.createElement('button');
            removeButton.type = 'button';
            removeButton.textContent = 'Remove';
            removeButton.onclick = function() {
                removeFileInput(this);
            };

            fileInputDiv.appendChild(fileInput);
            fileInputDiv.appendChild(removeButton);

            fileInputsContainer.appendChild(fileInputDiv);
            fileInputCount++;
        }

        function removeFileInput(button) {
            const wrapper = button.closest('.file-input-wrapper');
            const id = wrapper.id.split('-').pop();
            document.getElementById('file-input-' + id).remove();
        }
    </script>
</head>
<body>
<h1>Create News</h1>
<form th:action="@{/api/admin/news/create}" th:object="${newsReqDto}" method="post" enctype="multipart/form-data">
    <div>
        <label for="activity">Activity:</label>
        <input type="text" id="activity" th:field="*{activity}" required />
    </div>
    <div>
        <label for="content">Content:</label>
        <textarea id="content" th:field="*{content}" required></textarea>
    </div>
    <div>
        <label for="date">Date:</label>
        <input type="datetime-local" id="date" th:field="*{date}" required />
    </div>
    <div>
        <label>Images:</label>
        <div id="fileInputs">
            <div class="file-input-wrapper" id="file-input-0">
                <input type="file" name="imageFiles" multiple />
                <button type="button" onclick="removeFileInput(this)">Remove</button>
            </div>
        </div>
    </div>
    <div>
        이미지는 최대 10장, 개당 1MB 이하로 업로드 가능합니다. (총합 10MB 제한)
    </div>
    <div>
        <button type="button" onclick="addFileInput()">Add More Images</button>
    </div>
    <div>
        <button type="submit">Create</button>
    </div>
</form>
</body>
</html>